
<!-- Copyright Heddoko(TM) 2015, all rights reserved. -->

<!-- Profile summary -->
<div ng-hide="profile.id === 0" class="page">
    <header>
        <h1>
            {{ profile.firstName }} {{ profile.lastName }}
            <span></span>
        </h1>
    </header>

    <div class="row">

        <!-- Actions -->
        <div class="col-sm-12">
            <div class="pull-right">

                <!-- Create profile button -->
                <button
                    ng-click="global.browseTo.path('profile/create')"
                    class="btn btn-default">

                    <i class="fa fa-user-plus"></i>
                </button>

                <!-- Delete profile button -->
                <button
                    ng-show="profile.id > 0"
                    data-toggle="modal"
                    data-target="#deleteProfileConfirmation"
                    data-toggle="tooltip"
                    title="Delete <b>{{ profile.firstName }}</b>'s profile"
                    class="btn btn-danger">

                    <i class="fa fa-trash"></i>
                </button>

                <!-- Delete confirmation -->
                <div class="modal fade" id="deleteProfileConfirmation">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-body">
                                <p>
                                    Are you sure you want to delete <b>{{ profile.firstName }}
                                    {{ profile.lastName }}</b>'s profile?
                                </p>
                            </div>
                            <div class="modal-footer text-center">
                                <button type="button" class="btn btn-default" data-dismiss="modal">
                                    Cancel
                                </button>
                                <button ng-click="deleteProfile()" type="button" class="btn btn-primary" data-dismiss="modal">
                                    Yes, delete {{ profile.firstName }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <br>
        </div>
    </div>

    <section ng-hide="profile.id === 0">
    	<div class="row">

            <!-- Avatar -->
    		<div class="col-sm-12 col-md-5">
                <div class="text-center">
                    <ui-avatar
                        data-upload-endpoint="uploadAvatarEndpoint"
                        data-success-callback="uploadAvatarCallback"
                        data-src="profile.avatarSrc"
                        data-match-width="{{ calculateAvatarHeight() }}">
                    </ui-avatar>
                </div>
    		</div>

            <!-- Profile details -->
            <div class="col-sm-12 col-md-7">
                <ui-editable-fields
                    data-id="profileDetails"
                    data-model="global.state.profile.list[global.store.profileId]"
                    data-save="saveProfileDetails"
                    data-save-callback="saveProfileDetailsCallback"
                    data-heading="{{ global.state.profile.list[global.store.profileId].firstName }}'s details">

                    <!-- First name -->
                    <ui-editable-field
                        data-label="First Name"
                        data-key="firstName"
                        data-required="true">
                    </ui-editable-field>

                    <!-- Last name -->
                    <ui-editable-field
                        data-label="Last Name"
                        data-key="lastName">
                    </ui-editable-field>

                    <!-- Height -->
                    <ui-editable-field
                        data-label="Height"
                        data-key="height"
                        data-type="length">
                    </ui-editable-field>

                    <!-- Weight -->
                    <ui-editable-field
                        data-label="Weight"
                        data-key="mass"
                        data-type="mass">
                    </ui-editable-field>

                    <!-- Date of Birth -->
                    <ui-editable-field
                        data-label="Date of Birth"
                        data-key="dob"
                        data-type="date">
                    </ui-editable-field>

                    <!-- Gender -->
                    <ui-editable-field
                        data-label="Gender"
                        data-key="gender"
                        data-type="gender">
                    </ui-editable-field>

                    <!-- Phone -->
                    <ui-editable-field
                        data-label="Phone #"
                        data-key="phone">
                    </ui-editable-field>

                    <!-- Email -->
                    <ui-editable-field
                        data-label="Email"
                        data-key="email">
                    </ui-editable-field>

                    <!-- Profile creation date -->
                    <ui-editable-field
                        data-label="Profile Created"
                        data-key="createdAt"
                        data-type="datetime"
                        data-disabled="true">
                    </ui-editable-field>

                    <!-- Primary Tag -->
                    <ui-editable-field
                        data-label="Primary Sport"
                        data-key="primaryTag"
                        data-type="tag">
                    </ui-editable-field>

                    <!-- Secondary tags -->
                    <ui-editable-field
                        data-label="Other Sports"
                        data-key="secondaryTags"
                        data-type="tag"
                        data-max-tags="10">
                    </ui-editable-field>
                </ui-editable-fields>
            </div>
        </div>

        <!-- General notes -->
        <div class="row">
    		<div class="col-sm-12">
                <ui-editable-standalone-field
                    data-heading="Medical Information"
                    data-model="global.state.profile.list[global.store.profileId]"
                    data-key="medicalHistory"
                    data-empty="No medical information provided."
                    data-save="saveProfileDetails"
                    data-save-callback="saveProfileDetailsCallback">
                </ui-editable-standalone-field>
            </div>

            <div class="col-sm-12">
                <ui-editable-standalone-field
                    data-heading="Previous Injuries"
                    data-model="global.state.profile.list[global.store.profileId]"
                    data-key="injuries"
                    data-empty="No previous injuries."
                    data-save="saveProfileDetails"
                    data-save-callback="saveProfileDetailsCallback">
                </ui-editable-standalone-field>
            </div>

            <div class="col-sm-12">
                <ui-editable-standalone-field
                    data-heading="Other Notes"
                    data-model="global.state.profile.list[global.store.profileId]"
                    data-key="notes"
                    data-empty="No other notes."
                    data-save="saveProfileDetails"
                    data-save-callback="saveProfileDetailsCallback">
                </ui-editable-standalone-field>
    		</div>
    	</div>
    </section>

    <!-- FMS graphs... To be reviewed -->
    <section ng-show="fmsForms.length > 0">
        <div class="row">

            <!-- Current test -->
            <div class="col-sm-12 col-md-6">
                <div data-ng-include="'profile/partials/current-fms-plot.html'"></div>
            </div>

            <!-- Final results -->
            <div class="col-sm-12 col-md-6">
                <div data-ng-include="'profile/partials/final-fms-plot.html'"></div>
            </div>
        </div>
    </section>
</div>

<!-- No profile selected -->
<div ng-show="profile.id === 0" ng-include="'partials/no-profile-selected-notice.html'" class="page"></div>
